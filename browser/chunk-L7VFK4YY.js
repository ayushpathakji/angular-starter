import{a as I}from"./chunk-HEEFFEIR.js";import{a as v}from"./chunk-SKHW73SV.js";import{g as p,t as g}from"./chunk-7JNGCJXF.js";import{k as d,m as f}from"./chunk-YMM7O47R.js";import{Va as h,fa as o,lb as n,mb as c,rb as l,sa as m,sb as u,yb as a}from"./chunk-7CEJFRHJ.js";var S=["*"],V=(()=>{let s=class s{constructor(e){this.item={},this.titleForm={},this.form=new p({}),this.datasource="",this.route=e.get(d),this.router=e.get(f),this.configService=e.get(v),this.itemsService=e.get(I),this.fb=e.get(g),this.initialize(),this.createForm(),this.getItemById()}initialize(){this.api=this.configService.config.api,this.url=this.configService.config.url+this.endpoint,this.api?(this.datasourceColor="text-primary",this.datasource="CRUD API"):(this.datasource="LOCAL JSON (no crud)",this.datasourceColor="text-danger")}createForm(){console.log("createForm")}getItemById(){this.route.params.subscribe(e=>{e.id!==void 0&&this.itemsService.getItem(this.api,this.url,e.id).subscribe(t=>{t!=null?(this.item=t,this.setFormValue(this.item)):this.resetForm()})})}resetForm(){this.setFormValue(this.item)}setFormValue(e){console.log(e)}onCreate(){this.resetForm()}onUpdate(){this.item=this.form.value;let e=this.item.id;e==null?this.createItem(this.url,this.item):this.updateItem(this.url,this.item,e)}onDelete(){this.item.id!==void 0&&this.item.id!=null&&this.deleteItem(this.url,this.item.id)}onCopy(){this.item.id=null,this.form.value.id=null}createItem(e,t){this.itemsService.addItem(e,t).subscribe(i=>{this.item=i,this.form.setValue(i)})}updateItem(e,t,i){this.itemsService.updateItem(t,i,e).subscribe(F=>{this.item=F,this.form.setValue(this.item)})}deleteItem(e,t){this.itemsService.deleteItem(e,t).subscribe(i=>{console.log(i),this.resetForm()})}};s.\u0275fac=function(t){return new(t||s)(h(m))},s.\u0275cmp=o({type:s,selectors:[["app-page-form"]],ngContentSelectors:S,decls:3,vars:0,template:function(t,i){t&1&&(l(),n(0,"p"),a(1,"page-form component"),c(),u(2))}});let r=s;return r})();export{V as a};
