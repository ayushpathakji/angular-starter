import{a as g,b as C}from"./chunk-YMM7O47R.js";import{F as l,X as I,aa as E,p as u,u as m}from"./chunk-7CEJFRHJ.js";var c={headers:new g({"Content-Type":"application/json"})},O=(()=>{let h=class h{constructor(n){this.http=n}filterJsonItem(n,t){let e=null;return n.map((i,r,s)=>{let f=parseInt(t,10);s[r].id===f&&(e=s[r])}),e}filterJsonItemsCount(n,t){let e=0;if(t!==void 0&&t!=null){let i=t.toString().toLowerCase();e=n.filter(s=>s.name.toLowerCase().indexOf(i)===0).length}else e=n.length;return{count:e}}filterJsonItems(n,t,e,i){let r;if(t!==void 0&&t!=null){let p=t.toString().toLowerCase();r=n.filter(o=>o.name.toLowerCase().indexOf(p)===0)}else r=n;let s=e*(i-1),f=e*(i-1)+e-1,d=[];return r.map((p,o)=>{o>=s&&o<=f&&d.push(r[o])}),d}getItemsCount(n,t,e){n?t=t+"/count":t=t+".json";let i="";e!==void 0&&e!==""&&e!==null&&(i="?q="+e);let r=t+i,s;return n?s=this.http.get(r).pipe(l(this.handleError("getItems",[]))):s=this.http.get(r).pipe(m(f=>this.filterJsonItemsCount(f,e)),l(this.handleError("getItems",[]))),s}getItems(n,t,e,i,r){n||(t=t+".json");let s="";if(e!==void 0||i!==void 0||r!==void 0){let p=e,o;o=0,i===0&&(i=1),i!==void 0&&(o=(i-1)*e),r!==void 0&&r!==""&&r!==null&&(s="?q="+r),s!==""?s=s+"&limit="+p+"&offset="+o:s="?limit="+p+"&offset="+o}let f=t+s,d;return n?d=this.http.get(f).pipe(l(this.handleError("getItems",[]))):d=this.http.get(f).pipe(m(p=>this.filterJsonItems(p,r,e,i)),l(this.handleError("getItems",[]))),d}getItem(n,t,e){n||(t=t+".json");let i={};if(e!==void 0)if(n){let r=t+"/"+e;i=this.http.get(r).pipe(l(this.handleError(`getItem id=${e}`)))}else{let r=t;i=this.http.get(r).pipe(m(s=>this.filterJsonItem(s,e)),l(this.handleError("getItems",[])))}return i}addItem(n,t){let e=JSON.stringify(t);return this.http.post(n,e,c).pipe(l(this.handleError("addItem")))}updateItem(n,t,e){let i=e+"/"+t;return this.http.put(i,n,c).pipe(l(this.handleError("updateItem")))}deleteItem(n,t){let e=n+"/"+t;return this.http.delete(e,c).pipe(l(this.handleError("deleteItem")))}handleError(n="operation",t){return e=>(console.error(`${n} failed: ${e.message}`),u(t))}};h.\u0275fac=function(t){return new(t||h)(E(C))},h.\u0275prov=I({token:h,factory:h.\u0275fac,providedIn:"root"});let a=h;return a})();export{O as a};
